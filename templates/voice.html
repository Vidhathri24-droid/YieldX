<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Voice Assistant - YieldX</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body class="bg-light">

  <nav class="navbar navbar-light bg-success shadow-sm">
    <div class="container-fluid d-flex justify-content-between align-items-center">
      <span class="navbar-brand mb-0 h1 text-white">ğŸŒ± YieldX</span>
      <a href="{{ url_for('index') }}" class="btn btn-outline-light btn-sm rounded-pill">ğŸ  Home</a>
    </div>
  </nav>

  <div class="container py-5">
    <div class="card shadow-lg p-4 rounded-4 mx-auto text-center" style="max-width: 600px;">
      <h3 class="fw-bold mb-4">ğŸ™ï¸ Voice Assistant</h3>
      <p class="text-muted">Click the button and start speaking in your local language</p>
      <button class="btn btn-warning rounded-pill px-4" onclick="startRecording()">ğŸ¤ Start Voice Input</button>
      <p id="voiceResult" class="mt-3 fw-semibold"></p>
    </div>
  </div>

  <script>
    function startRecording() {
      if (!('webkitSpeechRecognition' in window)) {
        alert("Your browser does not support Speech Recognition.");
        return;
      }
      let recognition = new webkitSpeechRecognition();
      recognition.lang = "hi-IN"; // Default Hindi, can be dynamic
      recognition.start();
      recognition.onresult = function(event) {
        let result = event.results[0][0].transcript;
        document.getElementById("voiceResult").innerText = "You said: " + result;
        fetch('/voice', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ message: result })
        })
        .then(res => res.json())
        .then(data => {
          document.getElementById("voiceResult").innerText = "AI: " + data.reply;
        });
      };
    }
  </script>

</body>
</html>
